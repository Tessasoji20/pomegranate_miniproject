<!DOCTYPE html>
<html>
<head>
    <title>Admin â€“ Posts</title>
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <style>
        body {
            margin:0;
            font-family:Arial;
            background:#0f172a;
            color:#fff;
        }
        .layout { display:flex; }
        .side {
            width:220px;
            background:#020617;
            height:100vh;
            padding:16px;
        }
        .side a {
            display:block;
            color:#94a3b8;
            text-decoration:none;
            margin:12px 0;
        }
        .side a:hover { color:#fff; }

        .top-bar {
            height:64px;
            background:#1e293b;
            display:flex;
            align-items:center;
            padding:0 24px;
            font-size:20px;
            cursor:pointer;
        }
        .top-bar span { margin-left:12px; }

        .main {
            flex:1;
            padding:24px;
        }

        .card {
            background:#1e293b;
            padding:16px;
            border-radius:10px;
            margin-bottom:12px;
        }

        button {
            padding:6px 12px;
            cursor:pointer;
        }

        .action-buttons {
            display:flex;
            gap:10px;
            margin-top:8px;
        }

        .search-bar {
            display:flex;
            gap:10px;
            margin-bottom:20px;
        }

        .search-bar input {
            padding:8px 12px;
            width:280px;
            border-radius:6px;
            border:none;
            outline:none;
        }
        /* Base button */
        .btn {
            padding: 6px 14px;
            border-radius: 6px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s ease, transform 0.1s ease;
        }

        /* View button - calm / informational */
        .btn-view {
            background-color: #2563eb; /* blue */
            color: #ffffff;
        }

        .btn-view:hover {
            background-color: #1d4ed8;
            transform: translateY(-1px);
        }

        /* Flag button - warning / action */
        .btn-flag {
            background-color: #dc2626; /* red */
            color: #ffffff;
        }

        .btn-flag:hover {
            background-color: #b91c1c;
            transform: translateY(-1px);
        }

    </style>
</head>
<body>

<div class="top-bar" onclick="window.history.back()">
    <i class="fa-solid fa-arrow-left"></i>
    <span>Posts</span>
</div>

<div class="layout">
    <div class="side">
        <a href="{% url 'admin_panel:dashboard' %}">Dashboard</a>
        <a href="{% url 'admin_panel:users' %}">Users</a>
        <a href="{% url 'admin_panel:flags' %}">Flagged</a>
    </div>

    <div class="main">

        <!-- Search Bar -->
        <form method="get" class="search-bar">
            <input
                type="text"
                name="q"
                placeholder="Search posts by title..."
                value="{{ query }}"
            />
            <button type="submit">Search</button>
        </form>

        <!-- Posts List -->
        {% for post in posts %}
            <div class="card">
                <b>{{ post.title }}</b><br>
                <small>
                    {{ post.uploaded_by }} |
                    {{ post.get_resource_type_display }}
                </small>

                <div class="action-buttons">
                    <form method="get" action="{% url 'admin_panel:post_detail' post.id %}">
                        <button type="submit" class="btn btn-view">View</button>
                    </form>

                    <form method="post" action="{% url 'admin_panel:flag_post' post.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-flag">Flag</button>
                    </form>
                </div>
            </div>
        {% empty %}
            <p style="color:#94a3b8;">No posts found.</p>
        {% endfor %}

    </div>
</div>

</body>
</html>
